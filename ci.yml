provider: github
template: "v2-addon"

# ---------------------

addon: './ember-resources'
testApp: './testing/ember-app'

lint:
  commits: true
  eslint:
    - "./ember-resources"
    - "./testing/ember-app"

build:
  run: 'pnpm run build:js'
  expect: |
    core
    util
    deprecated-in-v4
    index.js
    index.js.map
    index.d.ts
    index.d.ts.map

support:
  typescript:
   - typescript@4.2
   - typescript@4.3
   - typescript@4.4
   - typescript@4.5
   - typescript@4.6
   - typescript@4.7

  ember-try:
    - ember-3.25
    - ember-3.26
    - ember-3.28
    - ember-4.0.0
    - ember-4.4
    - ember-concurrency-v1
    - ember-release
    - ember-beta
    - ember-canary
    - embroider-safe
    - embroider-optimized

release:
  semantic: true

extra:
  - name: Measure Asset Sizes
    needs: ['build']
    steps:
      # ember-ci-update inserts preamble here
      - name: 'measure asset sizes'
        run: node ./build/estimate-bytes/index.js
      - name: comment on PR
        uses: marocchino/sticky-pull-request-comment@v2
        with:
          path: ./build/estimate-bytes/comment.txt

